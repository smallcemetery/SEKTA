<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Каталог пижам | DreamPajamas</title>
    <meta name="description" content="Широкий выбор пижам для женщин, мужчин и детей. Натуральные ткани, удобные размеры, стильные расцветки. Бесплатная доставка от 5000 ₽.">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        .mobile-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        .mobile-menu.open {
            transform: translateX(0);
        }
        .filter-section {
            transition: all 0.3s ease;
        }
        .filter-content {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .filter-content.open {
            max-height: 500px;
            opacity: 1;
        }
        .product-card:hover {
            transform: translateY(-5px);
        }
        .active-filter {
            background-color: #60a5fa;
            color: white;
            border-color: #60a5fa;
        }
        .selected-size {
            background-color: #60a5fa;
            color: white;
        }
        .color-option.selected {
            border: 2px solid #60a5fa;
            transform: scale(1.1);
        }
    </style>
</head>
<body class="font-sans bg-gray-50">
    <!-- Mobile Menu -->
    <div class="mobile-menu fixed inset-0 bg-white z-50 md:hidden">
        <div class="p-4">
            <div class="flex justify-between items-center mb-8">
                <a href="index.html" class="text-2xl font-bold text-blue-400">DreamPajamas</a>
                <button onclick="toggleMobileMenu()" class="p-2">
                    <i data-feather="x" class="w-6 h-6"></i>
                </button>
            </div>
            <nav class="space-y-4">
                <a href="catalog.html" class="block text-lg font-medium text-gray-700 hover:text-blue-400 transition py-2">Каталог</a>
                <a href="about.html" class="block text-lg font-medium text-gray-700 hover:text-blue-400 transition py-2">О нас</a>
                <a href="reviews.html" class="block text-lg font-medium text-gray-700 hover:text-blue-400 transition py-2">Отзывы</a>
                <a href="contact.html" class="block text-lg font-medium text-gray-700 hover:text-blue-400 transition py-2">Контакты</a>
                <a href="account.html" class="block text-lg font-medium text-gray-700 hover:text-blue-400 transition py-2">Личный кабинет</a>
            </nav>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-blue-400">DreamPajamas</a>
            <nav class="hidden md:flex space-x-8">
                <a href="catalog.html" class="text-blue-400 transition">Каталог</a>
                <a href="about.html" class="text-gray-700 hover:text-blue-400 transition">О нас</a>
                <a href="reviews.html" class="text-gray-700 hover:text-blue-400 transition">Отзывы</a>
                <a href="contact.html" class="text-gray-700 hover:text-blue-400 transition">Контакты</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button onclick="toggleMobileMenu()" class="md:hidden p-2">
                    <i data-feather="menu" class="w-5 h-5"></i>
                </button>
                <a href="search.html" class="text-gray-700 hover:text-blue-400 p-2">
                    <i data-feather="search" class="w-5 h-5"></i>
                </a>
                <a href="cart.html" class="text-gray-700 hover:text-blue-400 p-2 relative">
                    <i data-feather="shopping-bag" class="w-5 h-5"></i>
                    <span id="cart-count" class="absolute -top-1 -right-1 bg-blue-400 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center text-[10px]">0</span>
                </a>
                <a href="account.html" class="text-gray-700 hover:text-blue-400 p-2">
                    <i data-feather="user" class="w-5 h-5"></i>
                </a>
            </div>
        </div>
    </header>

    <!-- Breadcrumbs -->
    <div class="bg-gray-100 py-3">
        <div class="container mx-auto px-4">
            <nav class="flex" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3 text-sm">
                    <li class="inline-flex items-center">
                        <a href="index.html" class="inline-flex items-center text-gray-700 hover:text-blue-600">
                            <i data-feather="home" class="w-4 h-4 mr-2"></i>
                            Главная
                        </a>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <i data-feather="chevron-right" class="w-4 h-4 text-gray-400"></i>
                            <span class="ml-1 text-gray-500 md:ml-2">Каталог</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="py-8">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Каталог пижам</h1>
            
            <div class="flex flex-col lg:flex-row gap-6">
                <!-- Filters Sidebar -->
                <aside class="w-full lg:w-80 flex-shrink-0">
                    <!-- Mobile Filters Toggle -->
                    <button onclick="toggleFilters()" class="lg:hidden w-full bg-blue-400 text-white font-medium py-3 px-4 rounded-lg mb-4 flex items-center justify-center">
                        <i data-feather="filter" class="w-4 h-4 mr-2"></i>
                        Фильтры
                    </button>

                    <div id="filters-sidebar" class="bg-white rounded-lg shadow-sm p-4 lg:p-6 lg:block hidden">
                        <!-- Categories -->
                        <div class="mb-6">
                            <h2 class="font-bold text-lg mb-4">Категории</h2>
                            <div class="space-y-2">
                                <button class="category-filter w-full text-left px-3 py-2 rounded hover:bg-blue-50 text-gray-700 transition" data-category="all">
                                    Все пижамы
                                </button>
                                <button class="category-filter w-full text-left px-3 py-2 rounded hover:bg-blue-50 text-gray-700 transition" data-category="women">
                                    Женские
                                </button>
                                <button class="category-filter w-full text-left px-3 py-2 rounded hover:bg-blue-50 text-gray-700 transition" data-category="men">
                                    Мужские
                                </button>
                                <button class="category-filter w-full text-left px-3 py-2 rounded hover:bg-blue-50 text-gray-700 transition" data-category="kids">
                                    Детские
                                </button>
                            </div>
                        </div>

                        <!-- Price Filter -->
                        <div class="filter-section mb-6">
                            <div class="flex justify-between items-center cursor-pointer" onclick="toggleFilter('price')">
                                <span class="font-bold text-lg">Цена</span>
                                <i data-feather="chevron-down" class="w-5 h-5 transition-transform" id="price-arrow"></i>
                            </div>
                            <div class="filter-content mt-4" id="price-content">
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between gap-2">
                                        <input type="number" id="min-price" placeholder="0" 
                                               class="w-full border border-gray-300 rounded px-3 py-2 text-sm" value="0">
                                        <span class="text-gray-500">—</span>
                                        <input type="number" id="max-price" placeholder="10000" 
                                               class="w-full border border-gray-300 rounded px-3 py-2 text-sm" value="10000">
                                    </div>
                                    <div class="px-1">
                                        <input type="range" min="0" max="10000" value="0" class="w-full" id="price-range-min">
                                        <input type="range" min="0" max="10000" value="10000" class="w-full" id="price-range-max">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Size Filter -->
                        <div class="filter-section mb-6">
                            <div class="flex justify-between items-center cursor-pointer" onclick="toggleFilter('size')">
                                <span class="font-bold text-lg">Размер</span>
                                <i data-feather="chevron-down" class="w-5 h-5 transition-transform" id="size-arrow"></i>
                            </div>
                            <div class="filter-content mt-4" id="size-content">
                                <div class="grid grid-cols-3 gap-2">
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="XS">XS</button>
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="S">S</button>
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="M">M</button>
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="L">L</button>
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="XL">XL</button>
                                    <button class="size-filter border border-gray-300 rounded px-2 py-2 text-sm hover:bg-gray-50 transition" data-size="XXL">XXL</button>
                                </div>
                            </div>
                        </div>

                        <!-- Color Filter -->
                        <div class="filter-section mb-6">
                            <div class="flex justify-between items-center cursor-pointer" onclick="toggleFilter('color')">
                                <span class="font-bold text-lg">Цвет</span>
                                <i data-feather="chevron-down" class="w-5 h-5 transition-transform" id="color-arrow"></i>
                            </div>
                            <div class="filter-content mt-4" id="color-content">
                                <div class="grid grid-cols-4 gap-3">
                                    <button class="color-filter w-8 h-8 rounded-full bg-blue-400 border-2 border-gray-300 transition hover:scale-110" data-color="blue" title="Синий"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-pink-300 border-2 border-gray-300 transition hover:scale-110" data-color="pink" title="Розовый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-gray-200 border-2 border-gray-300 transition hover:scale-110" data-color="gray" title="Серый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-white border-2 border-gray-300 transition hover:scale-110" data-color="white" title="Белый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-purple-300 border-2 border-gray-300 transition hover:scale-110" data-color="purple" title="Фиолетовый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-green-200 border-2 border-gray-300 transition hover:scale-110" data-color="green" title="Зеленый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-yellow-200 border-2 border-gray-300 transition hover:scale-110" data-color="yellow" title="Желтый"></button>
                                    <button class="color-filter w-8 h-8 rounded-full bg-red-300 border-2 border-gray-300 transition hover:scale-110" data-color="red" title="Красный"></button>
                                </div>
                            </div>
                        </div>

                        <!-- Material Filter -->
                        <div class="filter-section mb-6">
                            <div class="flex justify-between items-center cursor-pointer" onclick="toggleFilter('material')">
                                <span class="font-bold text-lg">Материал</span>
                                <i data-feather="chevron-down" class="w-5 h-5 transition-transform" id="material-arrow"></i>
                            </div>
                            <div class="filter-content mt-4" id="material-content">
                                <div class="space-y-2">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="material-filter rounded text-blue-500" value="cotton">
                                        <span class="ml-2 text-sm">Хлопок</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="material-filter rounded text-blue-500" value="silk">
                                        <span class="ml-2 text-sm">Шелк</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="material-filter rounded text-blue-500" value="flannel">
                                        <span class="ml-2 text-sm">Фланель</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" class="material-filter rounded text-blue-500" value="bamboo">
                                        <span class="ml-2 text-sm">Бамбук</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-2">
                            <button onclick="applyFilters()" class="flex-1 bg-blue-400 hover:bg-blue-500 text-white font-medium py-2 px-4 rounded transition duration-300">
                                Применить
                            </button>
                            <button onclick="resetFilters()" class="flex-1 border border-gray-300 text-gray-700 font-medium py-2 px-4 rounded transition duration-300 hover:bg-gray-100">
                                Сбросить
                            </button>
                        </div>
                    </div>
                </aside>

                <!-- Products Section -->
                <div class="flex-grow">
                    <!-- Products Header -->
                    <div class="bg-white p-4 rounded-lg shadow-sm mb-6 flex flex-col md:flex-row justify-between items-center">
                        <div class="mb-4 md:mb-0">
                            <span id="products-count" class="text-gray-600">Найдено 12 товаров</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-gray-600 mr-2">Сортировка:</span>
                            <select id="sort-select" class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
                                <option value="popular">По популярности</option>
                                <option value="price-asc">По цене (сначала дешевые)</option>
                                <option value="price-desc">По цене (сначала дорогие)</option>
                                <option value="newest">По новизне</option>
                                <option value="name">По названию</option>
                            </select>
                        </div>
                    </div>

                    <!-- Products Grid -->
                    <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <!-- Товары будут загружены через JavaScript -->
                    </div>

                    <!-- Loading -->
                    <div id="loading" class="text-center py-8 hidden">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400"></div>
                        <p class="text-gray-600 mt-2">Загрузка товаров...</p>
                    </div>

                    <!-- No Results -->
                    <div id="no-results" class="text-center py-12 hidden">
                        <i data-feather="search" class="w-16 h-16 text-gray-300 mx-auto mb-4"></i>
                        <h2 class="text-2xl font-bold text-gray-600 mb-2">Товары не найдены</h2>
                        <p class="text-gray-500 mb-6">Попробуйте изменить параметры фильтрации</p>
                        <button onclick="resetFilters()" class="bg-blue-400 hover:bg-blue-500 text-white font-medium py-2 px-6 rounded transition duration-300">
                            Сбросить фильтры
                        </button>
                    </div>

                    <!-- Pagination -->
                    <div id="pagination" class="flex justify-center mt-8 hidden">
                        <nav class="inline-flex rounded-md shadow">
                            <button class="pagination-btn px-3 py-2 rounded-l-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50" data-page="prev">
                                <i data-feather="chevron-left" class="w-4 h-4"></i>
                            </button>
                            <button class="pagination-btn px-4 py-2 border-t border-b border-gray-300 bg-white text-blue-600 font-medium hover:bg-blue-50" data-page="1">1</button>
                            <button class="pagination-btn px-4 py-2 border-t border-b border-gray-300 bg-white text-gray-500 hover:bg-gray-50" data-page="2">2</button>
                            <button class="pagination-btn px-4 py-2 border-t border-b border-gray-300 bg-white text-gray-500 hover:bg-gray-50" data-page="3">3</button>
                            <button class="pagination-btn px-3 py-2 rounded-r-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50" data-page="next">
                                <i data-feather="chevron-right" class="w-4 h-4"></i>
                            </button>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-8 pb-6 mt-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 md:gap-8 mb-6">
                <div>
                    <h3 class="text-lg font-bold mb-3">DreamPajamas</h3>
                    <p class="text-gray-400 text-sm">Уютные пижамы для всей семьи из натуральных тканей. Качество и комфорт в каждой детали.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-3">Меню</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="index.html" class="text-gray-400 hover:text-white transition">Главная</a></li>
                        <li><a href="catalog.html" class="text-gray-400 hover:text-white transition">Каталог</a></li>
                        <li><a href="about.html" class="text-gray-400 hover:text-white transition">О нас</a></li>
                        <li><a href="reviews.html" class="text-gray-400 hover:text-white transition">Отзывы</a></li>
                        <li><a href="contact.html" class="text-gray-400 hover:text-white transition">Контакты</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-3">Контакты</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li class="flex items-center">
                            <i data-feather="phone" class="w-4 h-4 mr-2"></i>
                            <span>+7 (123) 456-78-90</span>
                        </li>
                        <li class="flex items-center">
                            <i data-feather="mail" class="w-4 h-4 mr-2"></i>
                            <span>info@dreampajamas.ru</span>
                        </li>
                        <li class="flex items-center">
                            <i data-feather="map-pin" class="w-4 h-4 mr-2"></i>
                            <span>г. Москва, ул. Примерная, 123</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-3">Мы в соцсетях</h4>
                    <div class="flex space-x-3">
                        <a href="#" class="bg-gray-700 hover:bg-blue-600 h-10 w-10 rounded-full flex items-center justify-center transition">
                            <i data-feather="instagram" class="w-4 h-4"></i>
                        </a>
                        <a href="#" class="bg-gray-700 hover:bg-blue-800 h-10 w-10 rounded-full flex items-center justify-center transition">
                            <i data-feather="facebook" class="w-4 h-4"></i>
                        </a>
                        <a href="#" class="bg-gray-700 hover:bg-red-600 h-10 w-10 rounded-full flex items-center justify-center transition">
                            <i data-feather="youtube" class="w-4 h-4"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-4 text-center">
                <p class="text-gray-400 text-sm">© 2023 DreamPajamas. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div id="notification" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300">
        Товар добавлен в корзину!
    </div>

    <script>
        // База данных товаров
        const products = [
            {
                id: 1,
                name: 'Пижама "Нежность"',
                category: 'women',
                price: 2990,
                originalPrice: 3490,
                image: 'https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['XS', 'S', 'M', 'L'],
                colors: ['pink', 'blue', 'white'],
                material: 'cotton',
                isNew: true,
                isSale: false,
                rating: 4.8
            },
            {
                id: 2,
                name: 'Пижама "Комфорт"',
                category: 'men',
                price: 3490,
                originalPrice: 3990,
                image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['S', 'M', 'L', 'XL'],
                colors: ['blue', 'gray', 'green'],
                material: 'flannel',
                isNew: false,
                isSale: true,
                rating: 4.6
            },
            {
                id: 3,
                name: 'Пижама "Малыш"',
                category: 'kids',
                price: 1990,
                originalPrice: 2490,
                image: 'https://images.unsplash.com/photo-1519457431-44ccd64a579b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['XS', 'S'],
                colors: ['pink', 'blue', 'yellow'],
                material: 'cotton',
                isNew: false,
                isSale: true,
                rating: 4.9
            },
            {
                id: 4,
                name: 'Пижама "Мечта"',
                category: 'women',
                price: 4990,
                originalPrice: 4990,
                image: 'https://images.unsplash.com/photo-1586351934193-6dabf5d5a6dc?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['S', 'M', 'L'],
                colors: ['white', 'purple'],
                material: 'silk',
                isNew: true,
                isSale: false,
                rating: 4.7
            },
            {
                id: 5,
                name: 'Пижама "Классик"',
                category: 'men',
                price: 3290,
                originalPrice: 3290,
                image: 'https://images.unsplash.com/photo-1501196354995-cbb51c65aaea?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['M', 'L', 'XL', 'XXL'],
                colors: ['gray', 'blue', 'black'],
                material: 'cotton',
                isNew: false,
                isSale: false,
                rating: 4.5
            },
            {
                id: 6,
                name: 'Пижама "Зайка"',
                category: 'kids',
                price: 2190,
                originalPrice: 2190,
                image: 'https://images.unsplash.com/photo-1554342812-5c6a642d6d119?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                sizes: ['XS', 'S', 'M'],
                colors: ['pink', 'purple', 'yellow'],
                material: 'bamboo',
                isNew: true,
                isSale: false,
                rating: 4.8
            }
        ];

        // Фильтры
        let currentFilters = {
            category: 'all',
            minPrice: 0,
            maxPrice: 10000,
            sizes: [],
            colors: [],
            materials: [],
            sortBy: 'popular'
        };

        // Инициализация
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
        feather.replace();

        // Функции мобильного меню
        function toggleMobileMenu() {
            const menu = document.querySelector('.mobile-menu');
            menu.classList.toggle('open');
            document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : '';
        }

        function toggleFilters() {
            const sidebar = document.getElementById('filters-sidebar');
            sidebar.classList.toggle('hidden');
        }

        // Функции фильтров
        function toggleFilter(filterName) {
            const content = document.getElementById(filterName + '-content');
            const arrow = document.getElementById(filterName + '-arrow');
            
            content.classList.toggle('open');
            arrow.classList.toggle('rotate-180');
        }

        function applyFilters() {
            // Сбор данных фильтров
            currentFilters.minPrice = parseInt(document.getElementById('min-price').value) || 0;
            currentFilters.maxPrice = parseInt(document.getElementById('max-price').value) || 10000;
            currentFilters.materials = Array.from(document.querySelectorAll('.material-filter:checked')).map(cb => cb.value);
            
            // Применение фильтров
            filterProducts();
            
            // Закрытие фильтров на мобильных
            if (window.innerWidth < 1024) {
                document.getElementById('filters-sidebar').classList.add('hidden');
            }
        }

        function resetFilters() {
            // Сброс значений
            document.getElementById('min-price').value = 0;
            document.getElementById('max-price').value = 10000;
            document.querySelectorAll('.material-filter').forEach(cb => cb.checked = false);
            document.querySelectorAll('.size-filter').forEach(btn => btn.classList.remove('active-filter'));
            document.querySelectorAll('.color-filter').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('.category-filter').forEach(btn => btn.classList.remove('active-filter'));
            document.querySelector('.category-filter[data-category="all"]').classList.add('active-filter');
            
            // Сброс фильтров
            currentFilters = {
                category: 'all',
                minPrice: 0,
                maxPrice: 10000,
                sizes: [],
                colors: [],
                materials: [],
                sortBy: 'popular'
            };
            
            // Применение сброса
            filterProducts();
        }

        // Обработчики фильтров
        document.querySelectorAll('.category-filter').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-filter').forEach(b => b.classList.remove('active-filter'));
                this.classList.add('active-filter');
                currentFilters.category = this.dataset.category;
                filterProducts();
            });
        });

        document.querySelectorAll('.size-filter').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('active-filter');
                const size = this.dataset.size;
                if (this.classList.contains('active-filter')) {
                    currentFilters.sizes.push(size);
                } else {
                    currentFilters.sizes = currentFilters.sizes.filter(s => s !== size);
                }
            });
        });

        document.querySelectorAll('.color-filter').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                const color = this.dataset.color;
                if (this.classList.contains('selected')) {
                    currentFilters.colors.push(color);
                } else {
                    currentFilters.colors = currentFilters.colors.filter(c => c !== color);
                }
            });
        });

        document.getElementById('sort-select').addEventListener('change', function() {
            currentFilters.sortBy = this.value;
            filterProducts();
        });

        // Функция фильтрации товаров
        function filterProducts() {
            const loading = document.getElementById('loading');
            const noResults = document.getElementById('no-results');
            const productsGrid = document.getElementById('products-grid');
            const productsCount = document.getElementById('products-count');
            const pagination = document.getElementById('pagination');
            
            loading.classList.remove('hidden');
            productsGrid.innerHTML = '';
            
            // Имитация загрузки
            setTimeout(() => {
                let filteredProducts = products.filter(product => {
                    // Фильтр по категории
                    if (currentFilters.category !== 'all' && product.category !== currentFilters.category) {
                        return false;
                    }
                    
                    // Фильтр по цене
                    if (product.price < currentFilters.minPrice || product.price > currentFilters.maxPrice) {
                        return false;
                    }
                    
                    // Фильтр по размерам
                    if (currentFilters.sizes.length > 0 && !currentFilters.sizes.some(size => product.sizes.includes(size))) {
                        return false;
                    }
                    
                    // Фильтр по цветам
                    if (currentFilters.colors.length > 0 && !currentFilters.colors.some(color => product.colors.includes(color))) {
                        return false;
                    }
                    
                    // Фильтр по материалам
                    if (currentFilters.materials.length > 0 && !currentFilters.materials.includes(product.material)) {
                        return false;
                    }
                    
                    return true;
                });
                
                // Сортировка
                filteredProducts.sort((a, b) => {
                    switch (currentFilters.sortBy) {
                        case 'price-asc':
                            return a.price - b.price;
                        case 'price-desc':
                            return b.price - a.price;
                        case 'newest':
                            return (b.isNew ? 1 : 0) - (a.isNew ? 1 : 0);
                        case 'name':
                            return a.name.localeCompare(b.name);
                        default: // popular
                            return b.rating - a.rating;
                    }
                });
                
                // Отображение результатов
                loading.classList.add('hidden');
                
                if (filteredProducts.length === 0) {
                    noResults.classList.remove('hidden');
                    pagination.classList.add('hidden');
                    productsCount.textContent = 'Товары не найдены';
                } else {
                    noResults.classList.add('hidden');
                    productsCount.textContent = `Найдено ${filteredProducts.length} товаров`;
                    
                    // Отображение товаров
                    filteredProducts.forEach(product => {
                        const productElement = createProductElement(product);
                        productsGrid.appendChild(productElement);
                    });
                    
                    // Показ пагинации если много товаров
                    if (filteredProducts.length > 6) {
                        pagination.classList.remove('hidden');
                    } else {
                        pagination.classList.add('hidden');
                    }
                }
                
                feather.replace();
            }, 500);
        }

        // Создание элемента товара
        function createProductElement(product) {
            const div = document.createElement('div');
            div.className = 'product-card bg-white rounded-lg overflow-hidden shadow-md transition duration-300 hover:shadow-lg';
            div.innerHTML = `
                <div class="relative">
                    <img src="${product.image}" alt="${product.name}" class="w-full h-48 md:h-64 object-cover">
                    ${product.isNew ? '<span class="absolute top-3 right-3 bg-blue-400 text-white text-xs font-medium px-2 py-1 rounded-full">Новинка</span>' : ''}
                    ${product.isSale ? '<span class="absolute top-3 left-3 bg-red-400 text-white text-xs font-medium px-2 py-1 rounded-full">Акция</span>' : ''}
                    <button class="absolute top-3 right-3 bg-white bg-opacity-90 rounded-full p-2 opacity-0 transition-opacity product-card:hover:opacity-100">
                        <i data-feather="heart" class="w-4 h-4"></i>
                    </button>
                </div>
                <div class="p-4">
                    <h3 class="text-base md:text-lg font-medium text-gray-800 mb-1">${product.name}</h3>
                    <p class="text-gray-500 text-xs md:text-sm mb-2">${getCategoryName(product.category)}, ${getMaterialName(product.material)}</p>
                    <div class="flex items-center mb-3">
                        <div class="flex text-yellow-400 mr-2">
                            ${getStarRating(product.rating)}
                        </div>
                        <span class="text-gray-500 text-sm">${product.rating}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div>
                            <span class="text-base md:text-lg font-bold text-gray-800">${product.price.toLocaleString()} ₽</span>
                            ${product.originalPrice > product.price ? 
                                `<span class="text-sm text-gray-400 line-through ml-2">${product.originalPrice.toLocaleString()} ₽</span>` : ''}
                        </div>
                        <button class="add-to-cart bg-blue-400 hover:bg-blue-500 text-white rounded-full p-2 transition duration-300" 
                                data-product-id="${product.id}">
                            <i data-feather="shopping-cart" class="w-4 h-4 md:w-5 md:h-5"></i>
                        </button>
                    </div>
                </div>
            `;
            return div;
        }

        // Вспомогательные функции
        function getCategoryName(category) {
            const categories = {
                'women': 'Женская',
                'men': 'Мужская',
                'kids': 'Детская'
            };
            return categories[category] || category;
        }

        function getMaterialName(material) {
            const materials = {
                'cotton': 'хлопок',
                'silk': 'шелк',
                'flannel': 'фланель',
                'bamboo': 'бамбук'
            };
            return materials[material] || material;
        }

        function getStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= Math.floor(rating)) {
                    stars += '<i data-feather="star" class="w-3 h-3 md:w-4 md:h-4 fill-current"></i>';
                } else if (i === Math.ceil(rating) && rating % 1 !== 0) {
                    stars += '<i data-feather="star" class="w-3 h-3 md:w-4 md:h-4 fill-current" style="fill: url(#half-star)"></i>';
                } else {
                    stars += '<i data-feather="star" class="w-3 h-3 md:w-4 md:h-4"></i>';
                }
            }
            return stars;
        }

        // Функции корзины
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            showNotification('Товар добавлен в корзину!');
        }

        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.remove('translate-x-full');
            
            setTimeout(() => {
                notification.classList.add('translate-x-full');
            }, 3000);
        }

        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            filterProducts();
            
            // Обработчики для кнопок "В корзину"
            document.addEventListener('click', function(e) {
                if (e.target.closest('.add-to-cart')) {
                    const productId = parseInt(e.target.closest('.add-to-cart').dataset.productId);
                    addToCart(productId);
                }
            });

            // Закрытие мобильного меню при клике на ссылку
            document.querySelectorAll('.mobile-menu a').forEach(link => {
                link.addEventListener('click', toggleMobileMenu);
            });

            // Активация первого фильтра по категории
            document.querySelector('.category-filter[data-category="all"]').classList.add('active-filter');
        });

        // Адаптивность для тач-устройств
        document.addEventListener('touchstart', function() {}, {passive: true});
    </script>
</body>
</html>